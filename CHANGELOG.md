# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.1.12] - 2025-01-16

### Fixed
- **Build process**: Fixed `prepack` script to validate existing build instead of building (build now happens in GitHub Actions workflow)
- **npm package**: Ensured `dist/` folder with compiled files is included in published package
- **TypeScript declarations**: Fixed `types` field in package.json to point to `dist/index.d.ts` (generated by backstage-cli)
- **GitHub Actions**: Fixed build process to work without full Backstage project structure
- **Workflow**: Build now happens explicitly in workflow before `npm publish`, ensuring `dist/` is generated correctly
- **Tests**: Added `react` as devDependency to fix Jest test failures (`Cannot find module 'react'` and `Cannot find module 'react/jsx-runtime'`)
- **Build process**: Removed conflicting TypeScript config (`emitDeclarationOnly`, `outDir`, `rootDir`, `composite`) from `tsconfig.json` - `backstage-cli package build` now handles declaration file generation automatically
- **Build script**: Simplified build script to let `backstage-cli package build` handle TypeScript compilation and declaration generation

### Changed
- **CI/CD optimization**: Build step moved to workflow (before npm publish) instead of relying on prepack
- **Workflow efficiency**: Added node_modules cache to reduce GitHub Actions execution time
- **Validation**: Added verification step to ensure `dist/` folder is generated correctly before publishing
- **prepack script**: Now only validates that build files exist (doesn't build, as build happens in workflow)

## [0.1.11] - 2025-01-16

### Fixed
- **Build process**: Fixed `prepack` script to validate existing build instead of building (build now happens in GitHub Actions workflow)
- **npm package**: Ensured `dist/` folder with compiled files is included in published package
- **TypeScript declarations**: Fixed `types` field in package.json to point to `dist/index.d.ts` (generated by backstage-cli)
- **GitHub Actions**: Fixed build process to work without full Backstage project structure
- **Workflow**: Build now happens explicitly in workflow before `npm publish`, ensuring `dist/` is generated correctly

### Changed
- **CI/CD optimization**: Build step moved to workflow (before npm publish) instead of relying on prepack
- **Workflow efficiency**: Added node_modules cache to reduce GitHub Actions execution time
- **Validation**: Added verification step to ensure `dist/` folder is generated correctly before publishing
- **prepack script**: Now only validates that build files exist (doesn't build, as build happens in workflow)

## [0.1.10] - 2025-11-13

### Changed
- **CI/CD**: try use Trusted Publisher

## [0.1.9] - 2025-11-13

### Changed
- **CI/CD**: Added automatic npm publishing workflow triggered by tag creation

## [0.1.8] - 2025-11-13

### Added
- **Visual assets**: Added Conviso logo, screenshots, and demo GIF to README
- **Documentation improvements**: Enhanced README with visual demonstrations of plugin features

### Changed
- **Package optimization**: Excluded assets folder from npm package to reduce plugin size
- **README layout**: Improved README structure with better visual organization

## [0.1.7] - 2025-11-13

### Added
- **CI/CD workflows**: Complete CI/CD pipeline setup with automated testing, security scans, and npm publishing
- **Trusted Publisher**: Configured npm publishing via OIDC (OpenID Connect) for enhanced security
- **Automatic tag creation**: Tags are now created automatically from package.json version on merge to main
- **Pre-release validation**: Automatic validation of version and CHANGELOG updates before merging to main
- **Automatic PR creation**: PR from staging to main is created automatically after merge to staging
- **Security scan integration**: Conviso CLI security scanning integrated into staging and production workflows
- **Documentation**: Complete documentation in English for contributing, branch protection, and workflows

### Changed
- **Workflow optimization**: Consolidated jobs to reduce GitHub Actions costs
- **Documentation language**: All documentation files translated to English

## [0.1.6] - 2025-11-12

### Changed
- **Configuration method simplified**: Plugin now only supports Export ENV + app-config.yaml method (removed .env file support)
- **Error messages updated**: All error messages now reference "environment variable" instead of ".env file"
- **Code cleanup**: Removed dotenv dependency and manual .env file loading logic

### Removed
- **Debug logs**: Removed unnecessary console.log debug statements (kept error and warning logs for troubleshooting)
- **dotenv dependency**: Removed dotenv package as plugin now only uses environment variables with app-config.yaml

### Fixed
- **Configuration consistency**: All configuration references now consistently use environment variables with app-config.yaml
- **Error handling**: Improved error handling with silent failures where appropriate

## [0.1.5] - 2025-11-12

### Added
- **Backstage Config API support**: Plugin now reads configuration from `app-config.yaml` using Backstage's Config API
- **Dual configuration support**: Plugin reads from `app-config.yaml` first, falls back to environment variables for compatibility

### Changed
- **Configuration method**: Plugin now uses `coreServices.rootConfig` to read from `app-config.yaml`
- **README reorganized**: Improved structure and clarity, removed duplication, better organization of setup and configuration sections
- **README updated**: Added clear instructions for configuring via `app-config.yaml` with environment variable substitution and manual sidebar link setup

### Fixed
- **Environment variables**: Fixed issue where environment variables were not being read correctly
- **Configuration precedence**: Configuration now properly reads from Backstage config system first, then environment variables

## [0.1.4] - 2025-11-12

### Fixed
- Added `backend.d.ts` type declaration file for TypeScript support
- Fixed TypeScript error: "Cannot find declaration file for module '@conviso/backstage-plugin-conviso/backend.js'"

## [0.1.3] - 2025-11-12

### Fixed
- Fixed `ERR_REQUIRE_CYCLE_MODULE` errors by compiling backend to CommonJS
- Backend plugin now uses compiled CommonJS files (`dist/backend/index.js`)
- Added `backend.js` entry point that exports the compiled backend module
- Updated README with correct import path: `@conviso/backstage-plugin-conviso/backend.js`
- Backend follows official Backstage plugin pattern (CommonJS compilation)

## [0.1.2] - 2025-11-12

### Fixed
- Fixed backend import path to avoid circular dependency by importing directly from `module.ts`
- Updated README to show correct import syntax with `.js` extension for ES modules

## [0.1.1] - 2025-11-12

### Fixed
- Simplified backend plugin installation by removing unsupported `exports` field from `package.json`
- Added `backend.js` and `backend.d.ts` entry points in package root for easier imports
- Fixed TypeScript type errors in `entityMapper`, `convisoConfig`, and `integrationRoutes`
- Added automatic type generation script (`ensure-backend-types.js`) for backend types

### Changed
- Backend plugin now uses TypeScript source files directly (included in package)
- Improved README with clearer installation instructions

## [0.1.0] - 2025-11-12

### Added
- Initial release of Conviso Platform Backstage Plugin
- Project import functionality: Import Backstage catalog entities as assets in Conviso Platform
- Auto-import feature: Automatically sync new entities from Backstage catalog
- Integration management: Create and configure Conviso Platform integrations
- Asset status tracking: View which projects are imported and their status
- Search and filter: Search projects by name, description, or owner
- Pagination support: Handle large catalogs with efficient pagination
- Caching system: Multi-layer caching for improved performance
- Backend API routes: RESTful API for plugin operations
- Comprehensive test coverage: Unit tests for frontend and backend components

### Features
- **Project Selection**: Select and import multiple projects from Backstage catalog
- **Auto-Import**: Enable automatic synchronization of new entities
- **Status Refresh**: Manually refresh import status of assets
- **Table View**: Display projects with sorting, filtering, and pagination
- **Integration Configuration**: Set up Conviso Platform API credentials
- **Error Handling**: Comprehensive error handling and user feedback

### Technical
- Built with React and TypeScript
- Backend plugin with Express routes
- GraphQL integration with Conviso Platform API
- Kafka-based asynchronous processing
- File-based caching system
- Full test coverage with Jest and React Testing Library

       [0.1.12]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.12
       [0.1.11]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.11
       [0.1.10]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.10
       [0.1.9]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.9
       [0.1.8]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.8
       [0.1.7]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.7
       [0.1.6]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.6
       [0.1.5]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.5
       [0.1.4]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.4
       [0.1.3]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.3
       [0.1.2]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.2
       [0.1.1]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.1
       [0.1.0]: https://github.com/convisoappsec/backstage-plugin-conviso/releases/tag/v0.1.0

